<div class="pagetitle">
  <h1>Dashboard</h1>
  <nav>
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a routerLink="/">Home</a></li>
      <li class="breadcrumb-item active">Dashboard</li>
    </ol>
  </nav>
</div><!-- End Page Title -->

<!-- Display error message -->
<div *ngIf="errorMessage" class="alert alert-danger" role="alert">
  {{ errorMessage }}
</div>

<!-- Display success message -->
<div *ngIf="successMessage" class="alert alert-success" role="alert">
  {{ successMessage }}
</div>

<section class="section dashboard">
<div class="row">

  <!-- Left side columns -->
  <div class="col-lg-8">
    <div class="row">
      <!-- Sales Card -->
      <div class="col-xxl-4 col-md-6">
        <div class="card info-card sales-card">
          <div class="filter">
            <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
            <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
              <li class="dropdown-header text-start">
                <h6>Filter</h6>
              </li>
              <li><a class="dropdown-item" href="#">Today</a></li>
              <li><a class="dropdown-item" href="#">This Month</a></li>
              <li><a class="dropdown-item" href="#">This Year</a></li>
            </ul>
          </div>

          <div class="card-body">
            <h5 class="card-title">Sales <span>| Today</span></h5>

            <div class="d-flex align-items-center">
              <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                <i class="bi bi-cart"></i>
              </div>
              <div class="ps-3">
                <h6>145</h6>
                <span class="text-success small pt-1 fw-bold">12%</span> <span class="text-muted small pt-2 ps-1">increase</span>
              </div>
            </div>
          </div>
        </div>
      </div><!-- End Sales Card -->

      <!-- Revenue Card -->
      <div class="col-xxl-4 col-md-6">
        <div class="card info-card revenue-card">
          <div class="filter">
            <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
            <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
              <li class="dropdown-header text-start">
                <h6>Filter</h6>
              </li>
              <li><a class="dropdown-item" href="#">Today</a></li>
              <li><a class="dropdown-item" href="#">This Month</a></li>
              <li><a class="dropdown-item" href="#">This Year</a></li>
            </ul>
          </div>

          <div class="card-body">
            <h5 class="card-title">Revenue <span>| This Month</span></h5>

            <div class="d-flex align-items-center">
              <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                <i class="bi bi-currency-dollar"></i>
              </div>
              <div class="ps-3">
                <h6>$3,264</h6>
                <span class="text-success small pt-1 fw-bold">8%</span> <span class="text-muted small pt-2 ps-1">increase</span>
              </div>
            </div>
          </div>
        </div>
      </div><!-- End Revenue Card -->

      <!-- Customers Card -->
      <div class="col-xxl-4 col-xl-12">
        <div class="card info-card customers-card">
          <div class="filter">
            <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
            <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
              <li class="dropdown-header text-start">
                <h6>Filter</h6>
              </li>
              <li><a class="dropdown-item" href="#">Today</a></li>
              <li><a class="dropdown-item" href="#">This Month</a></li>
              <li><a class="dropdown-item" href="#">This Year</a></li>
            </ul>
          </div>

          <div class="card-body">
            <h5 class="card-title">Customers <span>| This Year</span></h5>

            <div class="d-flex align-items-center">
              <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                <i class="bi bi-people"></i>
              </div>
              <div class="ps-3">
                <h6>1244</h6>
                <span class="text-danger small pt-1 fw-bold">12%</span> <span class="text-muted small pt-2 ps-1">decrease</span>
              </div>
            </div>

          </div>
        </div>
      </div><!-- End Customers Card -->
    </div>
  </div><!-- End Left side columns -->

  <!-- Right side columns -->
  <div class="col-lg-4">

    <!-- Right side columns -->
<div class="col">
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">My Categories</h5>
      <button class="btn btn-primary" (click)="openModal(addCategoryModal)">Add Category</button>

      <table class="table">
        <thead>
          <tr>
            <th>Category Name</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let category of categories">
            <td>{{ category.name }}</td> 
          </tr>
        </tbody>
      </table>
    </div>
  </div><!-- End Categories Table -->
</div><!-- End Right side columns -->


    <div class="card">
      <div class="card-body">
        <h5 class="card-title">My Budgets</h5>
        <button class="btn btn-primary" (click)="openModal(addBudgetModal)">Add Budget</button>

        <table class="table">
          <thead>
            <tr>
              <th>Month</th>
              <th>Year</th>
              <th>Monthly Limit</th>
              <th>Spent</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let budget of budgets">
              <td>{{ getMonthName(budget.month) }}</td> 
              <td>{{ budget.year }}</td>
              <td>{{ budget.monthlyLimit | currency }}</td> 
              <td>{{ budget.spent | currency }}</td> 
            </tr>
          </tbody>
        </table>
      </div>
    </div><!-- End Budget Table -->


  </div><!-- End Right side columns -->
</div>




</section>

<!-- Modal for Adding Category -->
<ng-template #addCategoryModal let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="addCategoryModalLabel">Add New Category</h5>
    <button type="button" class="btn-close" (click)="modal.close()" aria-label="Close"></button>
  </div>
  <div class="modal-body">
    <form (ngSubmit)="addCategory()">
      <div class="mb-3">
        <label for="categoryName" class="form-label">Category Name</label>
        <input type="text" class="form-control" id="categoryName" [(ngModel)]="newCategory.name" name="name" required />
      </div>
      <button type="submit" class="btn btn-primary">Save</button>
    </form>
  </div>
</ng-template>




<!-- Modal for Adding Budget -->
<ng-template #addBudgetModal let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="addBudgetModalLabel">Add New Budget</h5>
    <button type="button" class="btn-close" (click)="modal.close()" aria-label="Close"></button>
  </div>
  <div class="modal-body">
    <form (ngSubmit)="onSubmit()">
      <div class="mb-3">
        <label for="monthlyLimit" class="form-label">Monthly Limit</label>
        <input type="number" class="form-control" id="monthlyLimit" [(ngModel)]="newBudget.monthlyLimit" name="monthlyLimit" required />
      </div>
      <div class="mb-3">
        <label for="spent" class="form-label">Spent</label>
        <input type="number" class="form-control" id="spent" [(ngModel)]="newBudget.spent" name="spent" required />
      </div>
      <div class="mb-3">
        <label for="month" class="form-label">Month</label>
        <input type="number" class="form-control" id="month" [(ngModel)]="newBudget.month" name="month" min="1" max="12" required />
      </div>
      <div class="mb-3">
        <label for="year" class="form-label">Year</label>
        <input type="number" class="form-control" id="year" [(ngModel)]="newBudget.year" name="year" required />
      </div>
      <button type="submit" class="btn btn-primary">Save</button>
    </form>
  </div>
</ng-template>
